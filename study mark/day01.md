# 网络io和io多路复用select/poll/epoll
## 网络io
网络io是指应用程序与网络设备之间进行数据交换的过程。网络io的主要形式有两种：
- 字节流式io：应用程序向网络设备发送字节流数据，网络设备收到字节流数据后，再将数据发送给应用程序。
- 包式io：应用程序向网络设备发送数据包，网络设备收到数据包后，再将数据包组装成字节流数据，再发送给应用程序。

## io多路复用
io多路复用是指应用程序通过一种机制，可以监视多个文件描述符，并能够同时对多个文件描述符进行IO操作。

1. select/poll/epoll
select/poll/epoll都是实现io多路复用的机制，区别在于：
- select/poll：是基于轮询的方式，每次调用select/poll时，会将当前进程中所有的文件描述符集合从用户态拷贝到内核态，然后进行扫描，找到准备好的文件描述符，将其加入到就绪列表中，最后返回。
- epoll：是基于事件驱动的方式，epoll会创建一个专门的epoll文件描述符，应用程序注册感兴趣的事件类型，并将感兴趣的事件类型注册到epoll文件描述符上，当事件发生时，epoll会通知应用程序。

2. select/poll/epoll的使用
select/poll/epoll的使用方式基本相同，都是通过调用系统调用，将文件描述符集合注册到epoll文件描述符上，并设置监听的事件类型。

3. select/poll/epoll的优缺点
select/poll/epoll都可以实现io多路复用，但是它们的优缺点各有不同：
- select/poll：
    - 优点：
        - 简单：使用简单，只需要调用一次系统调用，即可监视多个文件描述符。
        - 效率高：在大多数情况下，select/poll的效率都很高。
    - 缺点：
        - 不能跨平台：select/poll只支持Unix/Linux平台。
        - 单个进程可监视的文件描述符数量有限：在Linux上，每个进程可监视的文件描述符数量有限，默认是1024。
- epoll：
    - 优点：
        - 高效：epoll使用事件驱动的方式，只需要注册感兴趣的事件类型，不需要每次都将所有的文件描述符集合从用户态拷贝到内核态。
        - 跨平台：epoll支持Linux、FreeBSD、Solaris等平台。
        - 最大并发连接数：epoll的最大并发连接数受限于系统的最大文件描述符数，所以epoll可以支持更多的连接。
    - 缺点：